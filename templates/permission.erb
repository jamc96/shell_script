#!/bin/bash
# File managed by puppet

# default variables
DIRECTORY=<%= @path %>
OWNER=<%= @owner %>
GROUP=<%= @group %>
MODE=<%= @mode %>

# validate if user and group exist
if [[ $(getent group $GROUP) &&  $(getent passwd $OWNER) ]]; then
    # validate if directory exist
    if [ -d "$DIRECTORY" ]; then
        chmod -R $MODE $DIRECTORY
        chown -R $OWNER:$GROUP $DIRECTORY
    fi
fi
